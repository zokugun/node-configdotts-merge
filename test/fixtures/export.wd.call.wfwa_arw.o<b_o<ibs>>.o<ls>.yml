file1: |
  import { defineConfig } from "vite";
  // File1 plugins
  export default defineConfig(async () => ({
      // Vite options tailored for Tauri development and only applied in `tauri dev` or `tauri build`
      //
      // 1. prevent vite from obscuring rust errors
      clearScreen: false,
      // 2. tauri expects a fixed port, fail if that port is not available
      server: {
          port: 1420,
          strictPort: true,
          hmr: host ? { protocol: "ws", host, port: 1421 } : undefined,
          // 3. tell vite to ignore watching `src-tauri`
          watch: {
              ignored: ["**/src-tauri/**"]
          }
      },
  }));

file2: |
  import { defineConfig } from "vite";
  // File2 plugins
  export default defineConfig(async () => ({
      // File2: plugins
      plugins: ["plugin2"]
  }));

output: |
  import { defineConfig } from "vite";

  // File1 plugins
  // File2 plugins
  export default defineConfig(async () => ({
      // Vite options tailored for Tauri development and only applied in `tauri dev` or `tauri build`
      //
      // 1. prevent vite from obscuring rust errors
      clearScreen: false,
      // 2. tauri expects a fixed port, fail if that port is not available
      server: {
          port: 1420,
          strictPort: true,
          hmr: host ? { protocol: "ws", host, port: 1421 } : undefined,
          // 3. tell vite to ignore watching `src-tauri`
          watch: {
              ignored: ["**/src-tauri/**"]
          }
      },
      // File2: plugins
      plugins: ["plugin2"]
  }));
